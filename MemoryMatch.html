<!DOCTYPE html>
let time = 0;
let timerId = null;


function shuffle(array) {
for (let i = array.length - 1; i > 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[array[i], array[j]] = [array[j], array[i]];
}
return array;
}


function startTimer() {
clearInterval(timerId);
time = 0;
document.getElementById('time').innerText = time;
timerId = setInterval(() => {
time++;
document.getElementById('time').innerText = time;
}, 1000);
}


function createBoard() {
const board = document.getElementById('board');
board.innerHTML = '';
score = 0;
document.getElementById('score').innerText = score;
firstCard = null;
lockBoard = false;


cards = shuffle([...symbols, ...symbols]);


cards.forEach(symbol => {
const card = document.createElement('div');
card.className = 'card';
card.innerHTML = `
<div class="card-inner">
<div class="card-front">?</div>
<div class="card-back">${symbol}</div>
</div>
`;
card.addEventListener('click', () => flipCard(card, symbol));
board.appendChild(card);
});


startTimer();
}


function flipCard(card, symbol) {
if (lockBoard) return;
if (card.classList.contains('flipped')) return;


card.classList.add('flipped');


if (!firstCard) {
firstCard = { card, symbol };
return;
}


// ç¬¬äºŒå¼µå¡
if (firstCard.symbol === symbol) {
// é…å°æˆåŠŸ
card.classList.add('matched');
firstCard.card.classList.add('matched');
score++;
document.getElementById('score').innerText = score;
firstCard = null;


if (score === symbols.length) {
clearInterval(timerId);
setTimeout(() => alert(`ðŸŽ‰ å®Œæˆï¼ç”¨æ™‚ ${time} ç§’`), 300);
}
} else {
// é…å°å¤±æ•—
lockBoard = true;
setTimeout(() => {
card.classList.remove('flipped');
firstCard.card.classList.remove('flipped');
firstCard = null;
lockBoard = false;
}, 800);
}
}


function resetGame() {
createBoard();
}


createBoard();
</script>
</body>
</html>
